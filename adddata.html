<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">

</head>

<body>

	<div>First Name : <input type="text" id="txtFirstName"></div>
	<div>Last Name : <input type="text" id="txtLastName"></div>
	<div>Age : <input type="text" id="txtAge"></div>
	<div><button onclick="AddData(document.getElementById('txtFirstName').value,document.getElementById('txtLastName').value,document.getElementById('txtAge').value)">Add Data</button></div>

	<div>
		<ul id="show"></ul>
	</div>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-firestore.js"></script>

<script type="text/javascript">
	var firebaseConfig = {
	  apiKey: "AIzaSyDfTJJ425U4OY0xac6jdhtSxDeuJ-OF-lE",
	  authDomain: "retailproject-6f4fc.firebaseapp.com",
	  projectId: "retailproject-6f4fc",
	  storageBucket: "retailproject-6f4fc.appspot.com",
	  messagingSenderId: "653667385625",
	  appId: "1:653667385625:web:a5aed08500de80839f0588",
	  measurementId: "G-9SKTRHHSW9"
	};

	firebase.initializeApp(firebaseConfig);
	//firebase.analytics();
	var db=firebase.firestore().collection("personal")
	ReadData();


	function ReadData() {
		db.orderBy("Firstname").onSnapshot(function(snapshot){
			snapshot.docChanges().forEach(function(change){
				if(change.type === "added") {
					ShowData(change.doc);
				}
				if(change.type === "modified") {
					//ShowData(change.doc);
				}
				if(change.type === "removed") {
					var node = document.getElementById("L_"+change.doc.id);
					node.parentNode.removeChild(node);
					//ShowData(change.doc);
				}				
			});
		});
	}



	function ShowData(doc) {
		var ul = document.getElementById("show");
		var node = document.createElement("LI");
		node.id = "L_"+doc.id;
		var t1 = document.createTextNode(doc.data().Firstname + " | ");
		var t2 = document.createTextNode(doc.data().Lastname + " | ");
		var t3 = document.createTextNode(doc.data().Age);
		node.appendChild(t1);
		node.appendChild(t2);
		node.appendChild(t3);

		var b = document.createElement("BUTTON");
		b.innerHTML = "deleted";
		b.addEventListener("click",function(){
			RemoveData(doc.id);
		});
		node.appendChild(b);

		ul.appendChild(node);
	}


	//AddData("steven","wonder",66);
	function AddData(Fname,Lname,Age) {
		db.add({
			Firstname : Fname,
			Lastname : Lname,
			Age: Age
		});
		alert("Save");
	}

	function RemoveData(id) {
		db.doc(id).delete();
	}





</script>


</body>
</html>